<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Stock Management App</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #e0f7fa, #e1bee7);
        color: #333;
    }
    header {
        background: #4a148c;
        color: #fff;
        padding: 1rem;
        text-align: center;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    main {
        max-width: 900px;
        margin: 2rem auto;
        padding: 1.5rem;
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    h2 {
        color: #4a148c;
        margin-bottom: 1rem;
    }
    form {
        display: grid;
        grid-template-columns: 150px 1fr;
        gap: 0.75rem 1rem;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    label {
        font-weight: bold;
        color: #4a148c;
        text-align: right;
    }
    input, textarea, button {
        padding: 0.6rem;
        font-size: 1rem;
        border: 1px solid #ccc;
        border-radius: 6px;
        outline: none;
        transition: border 0.3s;
        width: 100%;
    }
    textarea {
        resize: vertical;
    }
    input:focus, textarea:focus {
        border-color: #7b1fa2;
    }
    button {
        grid-column: span 2;
        background: #4a148c;
        color: white;
        cursor: pointer;
        font-weight: bold;
        border: none;
        transition: background 0.3s;
    }
    button:hover {
        background: #6a1b9a;
    }
    .dashboard {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }
    .card {
        background: #f3e5f5;
        padding: 1rem;
        flex: 1;
        text-align: center;
        border-radius: 8px;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
        background: #fafafa;
        border-radius: 8px;
        overflow: hidden;
    }
    th, td {
        padding: 0.75rem;
        border-bottom: 1px solid #ddd;
        text-align: left;
    }
    th {
        background: #7b1fa2;
        color: white;
    }
    tr:hover {
        background: #f3e5f5;
    }
    .hidden {
        display: none;
    }
    #search {
        margin-top: 1rem;
        padding: 0.6rem;
        width: 100%;
        border-radius: 6px;
        border: 1px solid #ccc;
    }
    /* Action buttons styling */
    .action-buttons {
        display: flex;
        gap: 0.5rem;
    }
    .action-buttons button {
        padding: 0.4rem 0.8rem;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.9rem;
        color: #fff;
    }
    .edit-btn {
        background: #2e7d32;
    }
    .edit-btn:hover {
        background: #1b5e20;
    }
    .delete-btn {
        background: #c62828;
    }
    .delete-btn:hover {
        background: #8e0000;
    }
    @media (max-width: 600px) {
        form {
            grid-template-columns: 1fr;
            text-align: left;
        }
        label {
            text-align: left;
        }
        .dashboard {
            flex-direction: column;
        }
    }
</style>
</head>
<body>
<header>
    <h1>Stock Management App</h1>
</header>
<main>
    <section id="login-section">
        <h2>Login</h2>
        <form id="login-form">
            <label for="username">Username</label>
            <input type="text" id="username" required />
            <label for="password">Password</label>
            <input type="password" id="password" required />
            <button type="submit">Login</button>
        </form>
    </section>

    <section id="app-section" class="hidden">
        <h2>Add / Edit Product</h2>
        <form id="product-form">
            <input type="hidden" id="product-id" />
            <label for="product-name">Product Name</label>
            <input type="text" id="product-name" required />
            <label for="price">Price</label>
            <input type="number" id="price" min="0" step="0.01" required />
            <label for="stock">Stock</label>
            <input type="number" id="stock" min="0" required />
            <label for="description">Description</label>
            <textarea id="description"></textarea>
            <button type="submit">Save</button>
        </form>

        <div class="dashboard">
            <div class="card">Total Products: <span id="total-products">0</span></div>
            <div class="card">Total Units: <span id="total-units">0</span></div>
            <div class="card">Last Added: <span id="last-added">N/A</span></div>
        </div>

        <input type="text" id="search" placeholder="Search products..." />
        <table id="product-table">
            <thead>
                <tr>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Stock</th>
                    <th>Description</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>
</main>

<script>
    const loginSection = document.getElementById('login-section');
    const appSection = document.getElementById('app-section');
    const loginForm = document.getElementById('login-form');
    const productForm = document.getElementById('product-form');
    const tableBody = document.querySelector('#product-table tbody');
    const searchInput = document.getElementById('search');
    const totalProductsEl = document.getElementById('total-products');
    const totalUnitsEl = document.getElementById('total-units');
    const lastAddedEl = document.getElementById('last-added');

    let products = JSON.parse(localStorage.getItem('products') || '[]');

    loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const user = document.getElementById('username').value.trim();
        const pass = document.getElementById('password').value.trim();
        if (user === 'admin' && pass === 'admin@123') {
            loginSection.classList.add('hidden');
            appSection.classList.remove('hidden');
            renderProducts();
        } else {
            alert('Invalid credentials');
        }
    });

    productForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const id = document.getElementById('product-id').value;
        const name = document.getElementById('product-name').value.trim();
        const price = parseFloat(document.getElementById('price').value);
        const stock = parseInt(document.getElementById('stock').value);
        const desc = document.getElementById('description').value.trim();

        if (!name || price < 0 || stock < 0) {
            alert('Invalid input');
            return;
        }

        if (id) {
            const index = products.findIndex(p => p.id === id);
            products[index] = { id, name, price, stock, desc };
        } else {
            products.push({ id: Date.now().toString(), name, price, stock, desc });
        }
        saveProducts();
        productForm.reset();
        renderProducts();
    });

    function renderProducts(filter = '') {
        tableBody.innerHTML = '';
        const filtered = products.filter(p => p.name.toLowerCase().includes(filter) || p.desc.toLowerCase().includes(filter));
        filtered.forEach(p => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${p.name}</td>
                <td>${p.price.toFixed(2)}</td>
                <td>${p.stock}</td>
                <td>${p.desc}</td>
                <td>
                    <div class="action-buttons">
                        <button class="edit-btn" onclick="editProduct('${p.id}')">Edit</button>
                        <button class="delete-btn" onclick="deleteProduct('${p.id}')">Delete</button>
                    </div>
                </td>
            `;
            tableBody.appendChild(row);
        });
        updateDashboard();
    }

    function saveProducts() {
        localStorage.setItem('products', JSON.stringify(products));
    }

    function editProduct(id) {
        const p = products.find(p => p.id === id);
        document.getElementById('product-id').value = p.id;
        document.getElementById('product-name').value = p.name;
        document.getElementById('price').value = p.price;
        document.getElementById('stock').value = p.stock;
        document.getElementById('description').value = p.desc;
    }

    function deleteProduct(id) {
        if (confirm('Delete this product?')) {
            products = products.filter(p => p.id !== id);
            saveProducts();
            renderProducts();
        }
    }

    function updateDashboard() {
        totalProductsEl.textContent = products.length;
        totalUnitsEl.textContent = products.reduce((sum, p) => sum + p.stock, 0);
        lastAddedEl.textContent = products.length ? products[products.length - 1].name : 'N/A';
    }

    searchInput.addEventListener('input', (e) => {
        renderProducts(e.target.value.toLowerCase());
    });
</script>
</body>
</html>
